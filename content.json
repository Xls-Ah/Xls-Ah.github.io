[{"title":"Tomcat","date":"2020-07-23T08:54:17.000Z","path":"2020/07/23/Tomcat/","content":"<h1 id=\"Docker配置Tomcat\"><a href=\"#Docker配置Tomcat\" class=\"headerlink\" title=\"Docker配置Tomcat\"></a>Docker配置Tomcat</h1><h1 id=\"如果是阿里云需要在安全组开放端口\"><a href=\"#如果是阿里云需要在安全组开放端口\" class=\"headerlink\" title=\"如果是阿里云需要在安全组开放端口\"></a>如果是阿里云需要在安全组开放端口</h1><h1 id=\"以下参考B站Up-遇见狂神说\"><a href=\"#以下参考B站Up-遇见狂神说\" class=\"headerlink\" title=\"以下参考B站Up-遇见狂神说\"></a>以下参考B站Up-遇见狂神说</h1><h3 id=\"https-www-bilibili-com-video-BV1og4y1q7M4-p-15\"><a href=\"#https-www-bilibili-com-video-BV1og4y1q7M4-p-15\" class=\"headerlink\" title=\"https://www.bilibili.com/video/BV1og4y1q7M4/?p=15\"></a><a href=\"https://www.bilibili.com/video/BV1og4y1q7M4/?p=15\" target=\"_blank\" rel=\"noopener\">https://www.bilibili.com/video/BV1og4y1q7M4/?p=15</a></h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 官方的使用 下载tomcat并且运行 运行完后直接停止容器内的tomcat</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 使用docker images可以看到tomcat</span></span><br><span class=\"line\">docker run -it --rm tomcat:9.0</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 也可以pull</span></span><br><span class=\"line\">docker pull tomcat:9.0</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 启动运行</span></span><br><span class=\"line\">docker run -d -p 3355:8080 --name tomcat01 tomcat</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 测试访问没问题 但是打开网站会报404错误</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1.linux命令少了 2.没有webapps 阿里云镜像的原因，默认是最小的镜像，所有不必要的剔除掉</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 保证最小可运行的环境</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 进入容器</span></span><br><span class=\"line\">docker exec -it tomcat01 /bin/bash</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">将webapps.dist下的文件复制到webapps</span></span><br><span class=\"line\">cp -r webapps.dist/* webapps</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">退出容器</span></span><br><span class=\"line\">exit</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 查看docker启动的容器</span></span><br><span class=\"line\">docker ps</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">停止容器</span></span><br><span class=\"line\">docker stop tomcat01</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 再次查看docker启动的容器</span></span><br><span class=\"line\">docker ps</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"/.com//../../../assets/Tomcat/1.jpg\" alt></p>\n","updated":"2020-07-23T11:02:06.229Z","link":"","permalink":"http://yoursite.com/2020/07/23/Tomcat/","tags":[{"name":"Tomcat","slug":"Tomcat","permalink":"http://yoursite.com/tags/Tomcat/"}]},{"title":"Nginx","date":"2020-07-23T08:54:09.000Z","path":"2020/07/23/Nginx/","content":"<h1 id=\"Docker配置Nginx\"><a href=\"#Docker配置Nginx\" class=\"headerlink\" title=\"Docker配置Nginx\"></a>Docker配置Nginx</h1><h1 id=\"如果是阿里云需要在安全组开放端口\"><a href=\"#如果是阿里云需要在安全组开放端口\" class=\"headerlink\" title=\"如果是阿里云需要在安全组开放端口\"></a>如果是阿里云需要在安全组开放端口</h1><h1 id=\"以下参考B站Up-遇见狂神说\"><a href=\"#以下参考B站Up-遇见狂神说\" class=\"headerlink\" title=\"以下参考B站Up-遇见狂神说\"></a>以下参考B站Up-遇见狂神说</h1><h3 id=\"https-www-bilibili-com-video-BV1og4y1q7M4-p-15\"><a href=\"#https-www-bilibili-com-video-BV1og4y1q7M4-p-15\" class=\"headerlink\" title=\"https://www.bilibili.com/video/BV1og4y1q7M4/?p=15\"></a><a href=\"https://www.bilibili.com/video/BV1og4y1q7M4/?p=15\" target=\"_blank\" rel=\"noopener\">https://www.bilibili.com/video/BV1og4y1q7M4/?p=15</a></h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 下载nginx镜像</span></span><br><span class=\"line\">docker pull nginx</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 查看docker容器内的镜像</span></span><br><span class=\"line\">docker images</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 启动nginx --name 自定义名称 -p 外部端口:内部端口</span></span><br><span class=\"line\">docker run -d --name nginx01 -p 3344:80 nginx</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 查看docker启动的容器</span></span><br><span class=\"line\">docker ps</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 本机测试</span></span><br><span class=\"line\">curl localhost:3344</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 进入容器</span></span><br><span class=\"line\">docker exec -it nginx01 /bin/bash</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 找到nginx的配置文件</span></span><br><span class=\"line\">whereis nginx</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 进入目录</span></span><br><span class=\"line\">cd /etc/nginx</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 查看所有文件</span></span><br><span class=\"line\">ls</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 退出容器</span></span><br><span class=\"line\">exit</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 查看docker启动的容器</span></span><br><span class=\"line\">docker ps</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 停止docker启动的容器 可以用CONTAINER ID停掉 也可以用自定义名称</span></span><br><span class=\"line\">docker stop nginx01</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 再次查看docker启动的容器</span></span><br><span class=\"line\">docker ps</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"/.com//assets/Nginx/1.jpg\" alt></p>\n","updated":"2020-07-23T11:01:58.228Z","link":"","permalink":"http://yoursite.com/2020/07/23/Nginx/","tags":[{"name":"Nginx","slug":"Nginx","permalink":"http://yoursite.com/tags/Nginx/"}]},{"title":"MySQL","date":"2020-07-23T08:51:08.000Z","path":"2020/07/23/MySQL/","content":"<p>参考博客作者AmourLee</p>\n<p><a href=\"https://www.cnblogs.com/dongl961230/p/13260873.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/dongl961230/p/13260873.html</a></p>\n<h1 id=\"1-MySQL下载\"><a href=\"#1-MySQL下载\" class=\"headerlink\" title=\"1.MySQL下载\"></a>1.MySQL下载</h1><p><a href=\"https://dev.mysql.com/downloads/mysql/\" target=\"_blank\" rel=\"noopener\">https://dev.mysql.com/downloads/mysql/</a></p>\n<p><img src=\"/.com//../../../assets/MySQL/1.png\" alt></p>\n<h1 id=\"2-解压\"><a href=\"#2-解压\" class=\"headerlink\" title=\"2.解压\"></a>2.解压</h1><p>下载完成后解压到自己的想要安装的目录下，然后需要手动创建一个 my.ini 文件：这个文件用来配置安装MySQL时的配置：例如端口号、最大连接数、字符集 、数据的存放位置、存储引擎</p>\n<p><img src=\"/.com//../../../assets/MySQL/2.png\" alt></p>\n<h1 id=\"3配置my-ini文件\"><a href=\"#3配置my-ini文件\" class=\"headerlink\" title=\"3配置my.ini文件\"></a>3配置my.ini文件</h1><p>将下面的配置复制到自己创建的my.ini文件中，但是要注意修改自己的安装路径：basedir和datadir 有注释按照注释修改</p>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">[mysqld]</span></span><br><span class=\"line\"><span class=\"comment\"># 设置3306端口</span></span><br><span class=\"line\"><span class=\"attr\">port</span>=<span class=\"number\">3306</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 自定义设置mysql的安装目录，即解压mysql压缩包的目录</span></span><br><span class=\"line\"><span class=\"attr\">basedir</span>=E:\\\\tools\\mysql8.<span class=\"number\">0</span>\\mysql-<span class=\"number\">8.0</span>.<span class=\"number\">20</span>-winx64</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 自定义设置mysql数据库的数据存放目录</span></span><br><span class=\"line\"><span class=\"attr\">datadir</span>=E:\\\\tools\\mysql8.<span class=\"number\">0</span>\\mysql-<span class=\"number\">8.0</span>.<span class=\"number\">20</span>-winx64\\mysqlData</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 允许最大连接数</span></span><br><span class=\"line\"><span class=\"attr\">max_connections</span>=<span class=\"number\">200</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 允许连接失败的次数，这是为了防止有人从该主机试图攻击数据库系统</span></span><br><span class=\"line\"><span class=\"attr\">max_connect_errors</span>=<span class=\"number\">10</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 服务端使用的字符集默认为UTF8</span></span><br><span class=\"line\"><span class=\"attr\">character-set-server</span>=utf8mb4</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 创建新表时将使用的默认存储引擎</span></span><br><span class=\"line\"><span class=\"attr\">default-storage-engine</span>=INNODB</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 默认使用“mysql_native_password”插件认证</span></span><br><span class=\"line\"><span class=\"attr\">default_authentication_plugin</span>=mysql_native_password</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[mysql]</span></span><br><span class=\"line\"><span class=\"comment\"># 设置mysql客户端默认字符集</span></span><br><span class=\"line\"><span class=\"attr\">default-character-set</span>=utf8mb4</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[client]</span></span><br><span class=\"line\"><span class=\"comment\"># 设置mysql客户端连接服务端时默认使用的端口和默认字符集</span></span><br><span class=\"line\"><span class=\"attr\">port</span>=<span class=\"number\">3306</span></span><br><span class=\"line\"><span class=\"attr\">default-character-set</span>=utf8mb4</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"4-初始化\"><a href=\"#4-初始化\" class=\"headerlink\" title=\"4.初始化\"></a>4.初始化</h1><ul>\n<li>mysqld –initialize –console</li>\n<li>mysqld –install</li>\n<li>net start mysql</li>\n</ul>\n<p><img src=\"/.com//../../../assets/MySQL/3.png\" alt></p>\n<h1 id=\"5-修改密码\"><a href=\"#5-修改密码\" class=\"headerlink\" title=\"5.修改密码\"></a>5.修改密码</h1><p>win+R开启新的界面进入MySQL的bin目录然后依次执行命令，来修改客户端连接密码；</p>\n<ul>\n<li>mysql -u root -p</li>\n<li>alter user root@localhost identified by ‘root’;</li>\n</ul>\n<p><img src=\"/.com//assets/MySQL/4.png\" alt></p>\n<p>回车界面出现：Query OK 证明修改成功。</p>\n<p><img src=\"/.com//../../../assets/MySQL/1.jpg\" alt></p>\n","updated":"2020-07-23T11:01:47.767Z","link":"","permalink":"http://yoursite.com/2020/07/23/MySQL/","tags":[{"name":"MySQL","slug":"MySQL","permalink":"http://yoursite.com/tags/MySQL/"}]},{"title":"Docker","date":"2020-07-22T15:37:42.000Z","path":"2020/07/22/Docker/","content":"<h1 id=\"Docker的安装CentOS-7-8\"><a href=\"#Docker的安装CentOS-7-8\" class=\"headerlink\" title=\"Docker的安装CentOS 7/8\"></a>Docker的安装CentOS 7/8</h1><h3 id=\"以下参考B站Up-遇见狂神说\"><a href=\"#以下参考B站Up-遇见狂神说\" class=\"headerlink\" title=\"以下参考B站Up-遇见狂神说\"></a>以下参考B站Up-遇见狂神说</h3><h3 id=\"https-www-bilibili-com-video-BV1og4y1q7M4-p-15\"><a href=\"#https-www-bilibili-com-video-BV1og4y1q7M4-p-15\" class=\"headerlink\" title=\"https://www.bilibili.com/video/BV1og4y1q7M4/?p=15\"></a><a href=\"https://www.bilibili.com/video/BV1og4y1q7M4/?p=15\" target=\"_blank\" rel=\"noopener\">https://www.bilibili.com/video/BV1og4y1q7M4/?p=15</a></h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 卸载docker 如果没有安装过docker可以跳过这个步骤</span></span><br><span class=\"line\">yum remove docker \\</span><br><span class=\"line\">                  docker-client \\</span><br><span class=\"line\">                  docker-client-latest \\</span><br><span class=\"line\">                  docker-common \\</span><br><span class=\"line\">                  docker-latest \\</span><br><span class=\"line\">                  docker-latest-logrotate \\</span><br><span class=\"line\">                  docker-logrotate \\</span><br><span class=\"line\">                  docker-engine</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 需要的安装包</span></span><br><span class=\"line\">yum install -y yum-utils</span><br></pre></td></tr></table></figure>\n\n\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 设置镜像的仓库 建议配置阿里云的 因为官方比较慢</span></span><br><span class=\"line\">yum-config-manager \\</span><br><span class=\"line\">    --add-repo \\</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">   https://download.docker.com/linux/centos/docker-ce.repo 这是官方的</span></span><br><span class=\"line\">    http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 安装docker相关的内容</span></span><br><span class=\"line\">yum install docker-ce docker-ce-cli containerd.io</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 此时注意如果在CentOS 8上安装会报错 需要这个 containerd.io&gt;1.2.2-3 的依赖</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">在错误最下面那一行，linux 给了一个安装建议，说在安装命令后面追加 --skip-broken（跳过此项安装） 或者 --nobest （使用最佳安装包） 进行安装。</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">然后在上面的命令上追加 --nobest ，命令为：</span></span><br><span class=\"line\">yum install -y docker-ce --nobest #本人执行的是这一步没有任何问题</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">或者</span></span><br><span class=\"line\">dnf -y  install docker-ce --nobest</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"详情请见-https-blog-csdn-net-TianXieZuoMaiKong-article-details-104521439\"><a href=\"#详情请见-https-blog-csdn-net-TianXieZuoMaiKong-article-details-104521439\" class=\"headerlink\" title=\"详情请见:https://blog.csdn.net/TianXieZuoMaiKong/article/details/104521439\"></a>详情请见:<a href=\"https://blog.csdn.net/TianXieZuoMaiKong/article/details/104521439\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/TianXieZuoMaiKong/article/details/104521439</a></h5><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 启动docker服务</span></span><br><span class=\"line\">service docker start</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 启动docker</span></span><br><span class=\"line\">systemctl start docker</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 重启docker</span></span><br><span class=\"line\">systemctl restart docker</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 查看docker是否安装成功</span></span><br><span class=\"line\">docker version</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 配置阿里云镜像加速</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">阿里云控制台的左边菜单栏中的产品与服务点击容器镜像服务</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">镜像加速其中由关于Ubuntu CentOS Mac Windows配置</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">CentOS</span></span><br><span class=\"line\">sudo mkdir -p /etc/docker</span><br><span class=\"line\">sudo tee /etc/docker/daemon.json &lt;&lt;-'EOF'</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">  \"registry-mirrors\": [\"https://3jyl49d6.mirror.aliyuncs.com\"]</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">EOF</span><br><span class=\"line\">sudo systemctl daemon-reload</span><br><span class=\"line\">sudo systemctl restart docker</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"/.com//../../../assets/Docker/1.jpg\" alt></p>\n","updated":"2020-07-23T10:56:51.196Z","link":"","permalink":"http://yoursite.com/2020/07/22/Docker/","tags":[{"name":"Docker","slug":"Docker","permalink":"http://yoursite.com/tags/Docker/"}]},{"title":"MybatisPlus快速上手","date":"2020-07-21T04:47:44.000Z","path":"2020/07/21/MybatisPlus/","content":"<h3 id=\"MyBatis-Plus\"><a href=\"#MyBatis-Plus\" class=\"headerlink\" title=\"MyBatis Plus\"></a>MyBatis Plus</h3><p>国产的开源框架，基于 MyBatis</p>\n<p>核心功能就是简化 MyBatis 的开发，提高效率。</p>\n<h3 id=\"MyBatis-Plus-快速上手\"><a href=\"#MyBatis-Plus-快速上手\" class=\"headerlink\" title=\"MyBatis Plus 快速上手\"></a>MyBatis Plus 快速上手</h3><p>Spring Boot(2.3.0) + MyBatis Plus（国产的开源框架，并没有接入到 Spring 官方孵化器中）</p>\n<p>1、创建 Maven 工程</p>\n<p>2、pom.xml 引入 MyBatis Plus 的依赖</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.baomidou<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.3.1.tmp<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>3、创建实体类</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.southwind.mybatisplus.entity;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.Data;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer age;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>4、创建 Mapper 接口</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.southwind.mybatisplus.mapper;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.southwind.mybatisplus.entity.User;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">UserMapper</span> <span class=\"keyword\">extends</span> <span class=\"title\">BaseMapper</span>&lt;<span class=\"title\">User</span>&gt; </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>5、application.yml</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\">  <span class=\"attr\">datasource:</span></span><br><span class=\"line\">    <span class=\"attr\">driver-class-name:</span> <span class=\"string\">com.mysql.cj.jdbc.Driver</span></span><br><span class=\"line\">    <span class=\"attr\">url:</span> <span class=\"string\">jdbc:mysql://localhost:3306/db?useUnicode=true&amp;characterEncoding=UTF-8</span></span><br><span class=\"line\">    <span class=\"attr\">username:</span> <span class=\"string\">root</span></span><br><span class=\"line\">    <span class=\"attr\">password:</span> <span class=\"string\">root</span></span><br><span class=\"line\"><span class=\"attr\">mybatis-plus:</span></span><br><span class=\"line\">  <span class=\"attr\">configuration:</span></span><br><span class=\"line\">    <span class=\"attr\">log-impl:</span> <span class=\"string\">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br></pre></td></tr></table></figure>\n\n<p>6、启动类需要添加 @MapperScan(“mapper所在的包”)，否则无法加载 Mppaer bean。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.southwind.mybatisplus;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.SpringApplication;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@SpringBootApplication</span></span><br><span class=\"line\"><span class=\"meta\">@MapperScan</span>(<span class=\"string\">\"com.southwind.mybatisplus.mapper\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MybatisplusApplication</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        SpringApplication.run(MybatisplusApplication<span class=\"class\">.<span class=\"keyword\">class</span>, <span class=\"title\">args</span>)</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>7、测试</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.southwind.mybatisplus.mapper;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> org.junit.jupiter.api.Test;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@SpringBootTest</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UserMapperTest</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> UserMapper mapper;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">test</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        mapper.selectList(<span class=\"keyword\">null</span>).forEach(System.out::println);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"常用注解\"><a href=\"#常用注解\" class=\"headerlink\" title=\"常用注解\"></a>常用注解</h3><blockquote>\n<p>@TableName</p>\n</blockquote>\n<p>映射数据库的表名</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.southwind.mybatisplus.entity;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.annotation.TableName;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.Data;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"meta\">@TableName</span>(value = <span class=\"string\">\"user\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Account</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer id;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer age;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<blockquote>\n<p>@TableId</p>\n</blockquote>\n<p>设置主键映射，value 映射主键字段名</p>\n<p>type 设置主键类型，主键的生成策略，</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">AUTO(<span class=\"number\">0</span>),</span><br><span class=\"line\">NONE(<span class=\"number\">1</span>),</span><br><span class=\"line\">INPUT(<span class=\"number\">2</span>),</span><br><span class=\"line\">ASSIGN_ID(<span class=\"number\">3</span>),</span><br><span class=\"line\">ASSIGN_UUID(<span class=\"number\">4</span>),</span><br><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@deprecated</span> */</span></span><br><span class=\"line\"><span class=\"meta\">@Deprecated</span></span><br><span class=\"line\">ID_WORKER(<span class=\"number\">3</span>),</span><br><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@deprecated</span> */</span></span><br><span class=\"line\"><span class=\"meta\">@Deprecated</span></span><br><span class=\"line\">ID_WORKER_STR(<span class=\"number\">3</span>),</span><br><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@deprecated</span> */</span></span><br><span class=\"line\"><span class=\"meta\">@Deprecated</span></span><br><span class=\"line\">UUID(<span class=\"number\">4</span>);</span><br></pre></td></tr></table></figure>\n\n<table>\n<thead>\n<tr>\n<th>值</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>AUTO</td>\n<td>数据库自增</td>\n</tr>\n<tr>\n<td>NONE</td>\n<td>MP set 主键，雪花算法实现</td>\n</tr>\n<tr>\n<td>INPUT</td>\n<td>需要开发者手动赋值</td>\n</tr>\n<tr>\n<td>ASSIGN_ID</td>\n<td>MP 分配 ID，Long、Integer、String</td>\n</tr>\n<tr>\n<td>ASSIGN_UUID</td>\n<td>分配 UUID，Strinig</td>\n</tr>\n</tbody></table>\n<p>INPUT 如果开发者没有手动赋值，则数据库通过自增的方式给主键赋值，如果开发者手动赋值，则存入该值。</p>\n<p>AUTO 默认就是数据库自增，开发者无需赋值。</p>\n<p>ASSIGN_ID MP 自动赋值，雪花算法。</p>\n<p>ASSIGN_UUID 主键的数据类型必须是 String，自动生成 UUID 进行赋值</p>\n<blockquote>\n<p>@TableField</p>\n</blockquote>\n<p>映射非主键字段，value 映射字段名</p>\n<p>exist 表示是否为数据库字段 false，如果实体类中的成员变量在数据库中没有对应的字段，则可以使用 exist，VO、DTO</p>\n<p>select 表示是否查询该字段</p>\n<p>fill 表示是否自动填充，将对象存入数据库的时候，由 MyBatis Plus 自动给某些字段赋值，create_time、update_time</p>\n<p>1、给表添加 create_time、update_time 字段</p>\n<p>2、实体类中添加成员变量</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.southwind.mybatisplus.entity;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.annotation.FieldFill;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.annotation.TableField;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.annotation.TableId;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.annotation.TableName;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.Data;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Date;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"meta\">@TableName</span>(value = <span class=\"string\">\"user\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@TableId</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String id;</span><br><span class=\"line\">    <span class=\"meta\">@TableField</span>(value = <span class=\"string\">\"name\"</span>,select = <span class=\"keyword\">false</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String title;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer age;</span><br><span class=\"line\">    <span class=\"meta\">@TableField</span>(exist = <span class=\"keyword\">false</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String gender;</span><br><span class=\"line\">    <span class=\"meta\">@TableField</span>(fill = FieldFill.INSERT)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date createTime;</span><br><span class=\"line\">    <span class=\"meta\">@TableField</span>(fill = FieldFill.INSERT_UPDATE)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date updateTime;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>3、创建自动填充处理器</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.southwind.mybatisplus.handler;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.core.handlers.MetaObjectHandler;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.ibatis.reflection.MetaObject;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.stereotype.Component;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Date;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyMetaObjectHandler</span> <span class=\"keyword\">implements</span> <span class=\"title\">MetaObjectHandler</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">insertFill</span><span class=\"params\">(MetaObject metaObject)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.setFieldValByName(<span class=\"string\">\"createTime\"</span>,<span class=\"keyword\">new</span> Date(),metaObject);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.setFieldValByName(<span class=\"string\">\"updateTime\"</span>,<span class=\"keyword\">new</span> Date(),metaObject);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">updateFill</span><span class=\"params\">(MetaObject metaObject)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.setFieldValByName(<span class=\"string\">\"updateTime\"</span>,<span class=\"keyword\">new</span> Date(),metaObject);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<blockquote>\n<p>@Version</p>\n</blockquote>\n<p>标记乐观锁，通过 version 字段来保证数据的安全性，当修改数据的时候，会以 version 作为条件，当条件成立的时候才会修改成功。</p>\n<p>version = 2</p>\n<p>线程 1:update … set version = 2  where version = 1</p>\n<p>线程2 ：update … set version = 2 where version = 1</p>\n<p>1、数据库表添加 version 字段，默认值为 1</p>\n<p>2、实体类添加 version 成员变量，并且添加 @Version </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.southwind.mybatisplus.entity;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.annotation.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.Data;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Date;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"meta\">@TableName</span>(value = <span class=\"string\">\"user\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@TableId</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String id;</span><br><span class=\"line\">    <span class=\"meta\">@TableField</span>(value = <span class=\"string\">\"name\"</span>,select = <span class=\"keyword\">false</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String title;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer age;</span><br><span class=\"line\">    <span class=\"meta\">@TableField</span>(exist = <span class=\"keyword\">false</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String gender;</span><br><span class=\"line\">    <span class=\"meta\">@TableField</span>(fill = FieldFill.INSERT)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date createTime;</span><br><span class=\"line\">    <span class=\"meta\">@TableField</span>(fill = FieldFill.INSERT_UPDATE)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date updateTime;</span><br><span class=\"line\">    <span class=\"meta\">@Version</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer version;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>3、注册配置类</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.southwind.mybatisplus.config;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.extension.plugins.OptimisticLockerInterceptor;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.Bean;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.springframework.context.annotation.Configuration;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Configuration</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyBatisPlusConfig</span> </span>&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"meta\">@Bean</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> OptimisticLockerInterceptor <span class=\"title\">optimisticLockerInterceptor</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> OptimisticLockerInterceptor();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<blockquote>\n<p>@EnumValue</p>\n</blockquote>\n<p>1、通用枚举类注解，将数据库字段映射成实体类的枚举类型成员变量</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.southwind.mybatisplus.enums;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.annotation.EnumValue;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">enum</span> StatusEnum &#123;</span><br><span class=\"line\">    WORK(<span class=\"number\">1</span>,<span class=\"string\">\"上班\"</span>),</span><br><span class=\"line\">    REST(<span class=\"number\">0</span>,<span class=\"string\">\"休息\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    StatusEnum(Integer code, String msg) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.code = code;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.msg = msg;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@EnumValue</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer code;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String msg;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.southwind.mybatisplus.entity;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.annotation.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.southwind.mybatisplus.enums.StatusEnum;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.Data;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Date;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"meta\">@TableName</span>(value = <span class=\"string\">\"user\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@TableId</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String id;</span><br><span class=\"line\">    <span class=\"meta\">@TableField</span>(value = <span class=\"string\">\"name\"</span>,select = <span class=\"keyword\">false</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String title;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer age;</span><br><span class=\"line\">    <span class=\"meta\">@TableField</span>(exist = <span class=\"keyword\">false</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String gender;</span><br><span class=\"line\">    <span class=\"meta\">@TableField</span>(fill = FieldFill.INSERT)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date createTime;</span><br><span class=\"line\">    <span class=\"meta\">@TableField</span>(fill = FieldFill.INSERT_UPDATE)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date updateTime;</span><br><span class=\"line\">    <span class=\"meta\">@Version</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer version;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> StatusEnum status;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>application.yml</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">type-enums-package:</span> </span><br><span class=\"line\">  <span class=\"string\">com.southwind.mybatisplus.enums</span></span><br></pre></td></tr></table></figure>\n\n<p>2、实现接口</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.southwind.mybatisplus.enums;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.core.enums.IEnum;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">enum</span> AgeEnum implements IEnum&lt;Integer&gt; &#123;</span><br><span class=\"line\">    ONE(<span class=\"number\">1</span>,<span class=\"string\">\"一岁\"</span>),</span><br><span class=\"line\">    TWO(<span class=\"number\">2</span>,<span class=\"string\">\"两岁\"</span>),</span><br><span class=\"line\">    THREE(<span class=\"number\">3</span>,<span class=\"string\">\"三岁\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer code;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String msg;</span><br><span class=\"line\"></span><br><span class=\"line\">    AgeEnum(Integer code, String msg) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.code = code;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.msg = msg;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Integer <span class=\"title\">getValue</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.code;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<blockquote>\n<p>@TableLogic</p>\n</blockquote>\n<p>映射逻辑删除</p>\n<p>1、数据表添加 deleted 字段</p>\n<p>2、实体类添加注解</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.southwind.mybatisplus.entity;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.annotation.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.southwind.mybatisplus.enums.AgeEnum;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.southwind.mybatisplus.enums.StatusEnum;</span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.Data;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Date;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"meta\">@TableName</span>(value = <span class=\"string\">\"user\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@TableId</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String id;</span><br><span class=\"line\">    <span class=\"meta\">@TableField</span>(value = <span class=\"string\">\"name\"</span>,select = <span class=\"keyword\">false</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String title;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> AgeEnum age;</span><br><span class=\"line\">    <span class=\"meta\">@TableField</span>(exist = <span class=\"keyword\">false</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String gender;</span><br><span class=\"line\">    <span class=\"meta\">@TableField</span>(fill = FieldFill.INSERT)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date createTime;</span><br><span class=\"line\">    <span class=\"meta\">@TableField</span>(fill = FieldFill.INSERT_UPDATE)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date updateTime;</span><br><span class=\"line\">    <span class=\"meta\">@Version</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer version;</span><br><span class=\"line\">    <span class=\"meta\">@TableField</span>(value = <span class=\"string\">\"status\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> StatusEnum statusEnum;</span><br><span class=\"line\">    <span class=\"meta\">@TableLogic</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer deleted;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>3、application.yml 添加配置</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">global-config:</span></span><br><span class=\"line\">  <span class=\"attr\">db-config:</span></span><br><span class=\"line\">    <span class=\"attr\">logic-not-delete-value:</span> <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"attr\">logic-delete-value:</span> <span class=\"number\">1</span></span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"查询\"><a href=\"#查询\" class=\"headerlink\" title=\"查询\"></a>查询</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//mapper.selectList(null);</span></span><br><span class=\"line\">QueryWrapper wrapper = <span class=\"keyword\">new</span> QueryWrapper();</span><br><span class=\"line\"><span class=\"comment\">//        Map&lt;String,Object&gt; map = new HashMap&lt;&gt;();</span></span><br><span class=\"line\"><span class=\"comment\">//        map.put(\"name\",\"小红\");</span></span><br><span class=\"line\"><span class=\"comment\">//        map.put(\"age\",3);</span></span><br><span class=\"line\"><span class=\"comment\">//        wrapper.allEq(map);</span></span><br><span class=\"line\"><span class=\"comment\">//        wrapper.gt(\"age\",2);</span></span><br><span class=\"line\"><span class=\"comment\">//        wrapper.ne(\"name\",\"小红\");</span></span><br><span class=\"line\"><span class=\"comment\">//        wrapper.ge(\"age\",2);</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//like '%小'</span></span><br><span class=\"line\"><span class=\"comment\">//        wrapper.likeLeft(\"name\",\"小\");</span></span><br><span class=\"line\"><span class=\"comment\">//like '小%'</span></span><br><span class=\"line\"><span class=\"comment\">//        wrapper.likeRight(\"name\",\"小\");</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//inSQL</span></span><br><span class=\"line\"><span class=\"comment\">//        wrapper.inSql(\"id\",\"select id from user where id &lt; 10\");</span></span><br><span class=\"line\"><span class=\"comment\">//        wrapper.inSql(\"age\",\"select age from user where age &gt; 3\");</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//        wrapper.orderByDesc(\"age\");</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//        wrapper.orderByAsc(\"age\");</span></span><br><span class=\"line\"><span class=\"comment\">//        wrapper.having(\"id &gt; 8\");</span></span><br><span class=\"line\"></span><br><span class=\"line\">mapper.selectList(wrapper).forEach(System.out::println);</span><br></pre></td></tr></table></figure>\n\n\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//        System.out.println(mapper.selectById(7));</span></span><br><span class=\"line\"><span class=\"comment\">//        mapper.selectBatchIds(Arrays.asList(7,8,9)).forEach(System.out::println);</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//Map 只能做等值判断，逻辑判断需要使用 Wrapper 来处理</span></span><br><span class=\"line\"><span class=\"comment\">//        Map&lt;String,Object&gt; map = new HashMap&lt;&gt;();</span></span><br><span class=\"line\"><span class=\"comment\">//        map.put(\"id\",7);</span></span><br><span class=\"line\"><span class=\"comment\">//        mapper.selectByMap(map).forEach(System.out::println);</span></span><br><span class=\"line\"></span><br><span class=\"line\">QueryWrapper wrapper = <span class=\"keyword\">new</span> QueryWrapper();</span><br><span class=\"line\">wrapper.eq(<span class=\"string\">\"id\"</span>,<span class=\"number\">7</span>);</span><br><span class=\"line\"><span class=\"comment\">////        System.out.println(mapper.selectCount(wrapper));</span></span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"comment\">//        //将查询的结果集封装到Map中</span></span><br><span class=\"line\"><span class=\"comment\">//        mapper.selectMaps(wrapper).forEach(System.out::println);</span></span><br><span class=\"line\"><span class=\"comment\">//        System.out.println(\"-------------------\");</span></span><br><span class=\"line\"><span class=\"comment\">//        mapper.selectList(wrapper).forEach(System.out::println);</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//分页查询</span></span><br><span class=\"line\"><span class=\"comment\">//        Page&lt;User&gt; page = new Page&lt;&gt;(2,2);</span></span><br><span class=\"line\"><span class=\"comment\">//        Page&lt;User&gt; result = mapper.selectPage(page,null);</span></span><br><span class=\"line\"><span class=\"comment\">//        System.out.println(result.getSize());</span></span><br><span class=\"line\"><span class=\"comment\">//        System.out.println(result.getTotal());</span></span><br><span class=\"line\"><span class=\"comment\">//        result.getRecords().forEach(System.out::println);</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//        Page&lt;Map&lt;String,Object&gt;&gt; page = new Page&lt;&gt;(1,2);</span></span><br><span class=\"line\"><span class=\"comment\">//        mapper.selectMapsPage(page,null).getRecords().forEach(System.out::println);</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//        mapper.selectObjs(null).forEach(System.out::println);</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">System.out.println(mapper.selectOne(wrapper));</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"自定义-SQL（多表关联查询）\"><a href=\"#自定义-SQL（多表关联查询）\" class=\"headerlink\" title=\"自定义 SQL（多表关联查询）\"></a>自定义 SQL（多表关联查询）</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.southwind.mybatisplus.entity;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> lombok.Data;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ProductVO</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer category;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer count;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String description;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer userId;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String userName;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.southwind.mybatisplus.mapper;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.southwind.mybatisplus.entity.ProductVO;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.southwind.mybatisplus.entity.User;</span><br><span class=\"line\"><span class=\"keyword\">import</span> org.apache.ibatis.annotations.Select;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">UserMapper</span> <span class=\"keyword\">extends</span> <span class=\"title\">BaseMapper</span>&lt;<span class=\"title\">User</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Select</span>(<span class=\"string\">\"select p.*,u.name userName from product p,user u where p.user_id = u.id and u.id = #&#123;id&#125;\"</span>)</span><br><span class=\"line\">    <span class=\"function\">List&lt;ProductVO&gt; <span class=\"title\">productList</span><span class=\"params\">(Integer id)</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"添加\"><a href=\"#添加\" class=\"headerlink\" title=\"添加\"></a>添加</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">User user = <span class=\"keyword\">new</span> User();</span><br><span class=\"line\">user.setTitle(<span class=\"string\">\"小明\"</span>);</span><br><span class=\"line\">user.setAge(<span class=\"number\">22</span>);</span><br><span class=\"line\">mapper.insert(user);</span><br><span class=\"line\">System.out.println(user);</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"删除\"><a href=\"#删除\" class=\"headerlink\" title=\"删除\"></a>删除</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//mapper.deleteById(1);</span></span><br><span class=\"line\"><span class=\"comment\">//        mapper.deleteBatchIds(Arrays.asList(7,8));</span></span><br><span class=\"line\"><span class=\"comment\">//        QueryWrapper wrapper = new QueryWrapper();</span></span><br><span class=\"line\"><span class=\"comment\">//        wrapper.eq(\"age\",14);</span></span><br><span class=\"line\"><span class=\"comment\">//        mapper.delete(wrapper);</span></span><br><span class=\"line\"></span><br><span class=\"line\">Map&lt;String,Object&gt; map = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\">map.put(<span class=\"string\">\"id\"</span>,<span class=\"number\">10</span>);</span><br><span class=\"line\">mapper.deleteByMap(map);</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"修改\"><a href=\"#修改\" class=\"headerlink\" title=\"修改\"></a>修改</h3><figure class=\"highlight jboss-cli\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">//</span>        <span class=\"string\">//update</span> <span class=\"string\">...</span> <span class=\"keyword\">version</span> = 3 where <span class=\"keyword\">version</span> = 2</span><br><span class=\"line\"><span class=\"string\">//</span>        User user = mapper.selectById<span class=\"params\">(7)</span>;</span><br><span class=\"line\"><span class=\"string\">//</span>        user.<span class=\"keyword\">set</span>Title<span class=\"params\">(\"一号\")</span>;</span><br><span class=\"line\"><span class=\"string\">//</span></span><br><span class=\"line\"><span class=\"string\">//</span>        <span class=\"string\">//update</span> <span class=\"string\">...</span> <span class=\"keyword\">version</span> = 3 where <span class=\"keyword\">version</span> = 2</span><br><span class=\"line\"><span class=\"string\">//</span>        User user1 = mapper.selectById<span class=\"params\">(7)</span>;</span><br><span class=\"line\"><span class=\"string\">//</span>        user1.<span class=\"keyword\">set</span>Title<span class=\"params\">(\"二号\")</span>;</span><br><span class=\"line\"><span class=\"string\">//</span></span><br><span class=\"line\"><span class=\"string\">//</span>        mapper.updateById<span class=\"params\">(user1)</span>;</span><br><span class=\"line\"><span class=\"string\">//</span>        mapper.updateById<span class=\"params\">(user)</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">User user = mapper.selectById<span class=\"params\">(1)</span>;</span><br><span class=\"line\">user.<span class=\"keyword\">set</span>Title<span class=\"params\">(\"小红\")</span>;</span><br><span class=\"line\">QueryWrapper wrapper = new QueryWrapper<span class=\"params\">()</span>;</span><br><span class=\"line\">wrapper.eq<span class=\"params\">(\"age\",22)</span>;</span><br><span class=\"line\">mapper.update<span class=\"params\">(user,wrapper)</span>;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"MyBatisPlus-自动生成\"><a href=\"#MyBatisPlus-自动生成\" class=\"headerlink\" title=\"MyBatisPlus 自动生成\"></a>MyBatisPlus 自动生成</h3><p>根据数据表自动生成实体类、Mapper、Service、ServiceImpl、Controller</p>\n<p>1、pom.xml 导入 MyBatis Plus Generator</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.baomidou<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>mybatis-plus-generator<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.3.1.tmp<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.velocity<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>velocity<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.7<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>Velocity（默认）、Freemarker、Beetl</p>\n<p>2、启动类</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.southwind.mybatisplus;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.annotation.DbType;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.generator.AutoGenerator;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.generator.config.DataSourceConfig;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.generator.config.GlobalConfig;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.generator.config.PackageConfig;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.generator.config.StrategyConfig;</span><br><span class=\"line\"><span class=\"keyword\">import</span> com.baomidou.mybatisplus.generator.config.rules.NamingStrategy;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Main</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//创建generator对象</span></span><br><span class=\"line\">        AutoGenerator autoGenerator = <span class=\"keyword\">new</span> AutoGenerator();</span><br><span class=\"line\">        <span class=\"comment\">//数据源</span></span><br><span class=\"line\">        DataSourceConfig dataSourceConfig = <span class=\"keyword\">new</span> DataSourceConfig();</span><br><span class=\"line\">        dataSourceConfig.setDbType(DbType.MYSQL);</span><br><span class=\"line\">        dataSourceConfig.setUrl(<span class=\"string\">\"jdbc:mysql://ip:3306/db?useUnicode=true&amp;characterEncoding=UTF-8\"</span>);</span><br><span class=\"line\">        dataSourceConfig.setUsername(<span class=\"string\">\"root\"</span>);</span><br><span class=\"line\">        dataSourceConfig.setPassword(<span class=\"string\">\"root\"</span>);</span><br><span class=\"line\">        dataSourceConfig.setDriverName(<span class=\"string\">\"com.mysql.cj.jdbc.Driver\"</span>);</span><br><span class=\"line\">        autoGenerator.setDataSource(dataSourceConfig);</span><br><span class=\"line\">        <span class=\"comment\">//全局配置</span></span><br><span class=\"line\">        GlobalConfig globalConfig = <span class=\"keyword\">new</span> GlobalConfig();</span><br><span class=\"line\">        globalConfig.setOutputDir(System.getProperty(<span class=\"string\">\"user.dir\"</span>)+<span class=\"string\">\"/src/main/java\"</span>);</span><br><span class=\"line\">        globalConfig.setOpen(<span class=\"keyword\">false</span>);</span><br><span class=\"line\">        globalConfig.setAuthor(<span class=\"string\">\"southwind\"</span>);</span><br><span class=\"line\">        globalConfig.setServiceName(<span class=\"string\">\"%sService\"</span>);</span><br><span class=\"line\">        autoGenerator.setGlobalConfig(globalConfig);</span><br><span class=\"line\">        <span class=\"comment\">//包信息</span></span><br><span class=\"line\">        PackageConfig packageConfig = <span class=\"keyword\">new</span> PackageConfig();</span><br><span class=\"line\">        packageConfig.setParent(<span class=\"string\">\"com.southwind.mybatisplus\"</span>);</span><br><span class=\"line\">        packageConfig.setModuleName(<span class=\"string\">\"generator\"</span>);</span><br><span class=\"line\">        packageConfig.setController(<span class=\"string\">\"controller\"</span>);</span><br><span class=\"line\">        packageConfig.setService(<span class=\"string\">\"service\"</span>);</span><br><span class=\"line\">        packageConfig.setServiceImpl(<span class=\"string\">\"service.impl\"</span>);</span><br><span class=\"line\">        packageConfig.setMapper(<span class=\"string\">\"mapper\"</span>);</span><br><span class=\"line\">        packageConfig.setEntity(<span class=\"string\">\"entity\"</span>);</span><br><span class=\"line\">        autoGenerator.setPackageInfo(packageConfig);</span><br><span class=\"line\">        <span class=\"comment\">//配置策略</span></span><br><span class=\"line\">        StrategyConfig strategyConfig = <span class=\"keyword\">new</span> StrategyConfig();</span><br><span class=\"line\">        strategyConfig.setEntityLombokModel(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">        strategyConfig.setNaming(NamingStrategy.underline_to_camel);</span><br><span class=\"line\">        strategyConfig.setColumnNaming(NamingStrategy.underline_to_camel);</span><br><span class=\"line\">        autoGenerator.setStrategy(strategyConfig);</span><br><span class=\"line\"></span><br><span class=\"line\">        autoGenerator.execute();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Spring-Boot-MyBatis-Plus-打包应用，直接发布-阿里云-上云\"><a href=\"#Spring-Boot-MyBatis-Plus-打包应用，直接发布-阿里云-上云\" class=\"headerlink\" title=\"Spring Boot + MyBatis Plus 打包应用，直接发布 阿里云 上云\"></a>Spring Boot + MyBatis Plus 打包应用，直接发布 阿里云 上云</h3>","updated":"2020-07-21T06:40:38.472Z","link":"","permalink":"http://yoursite.com/2020/07/21/MybatisPlus/","tags":[{"name":"mybatis","slug":"mybatis","permalink":"http://yoursite.com/tags/mybatis/"}]}]